<!DOCTYPE html>
<title>CodeMirror: XML Autocomplete Demo</title>
<meta charset="utf-8"/>

<body>

<head>
<style>
table {
    font-family: arial, sans-serif;
    border-collapse: collapse;
    width:400pt;
}

td, th {
    border: 1px solid #dddddd;
    text-align: left;
    padding: 8px;
}

body{padding:10pt;}

</style>
</head>
<h1>Coptic Project:XML Transcription Editor</h1>
<hr>

<hr>
<div>



<link rel="stylesheet" href="codemirror-5.15.2/lib/codemirror.css">
<link rel="stylesheet" href="codemirror-5.15.2/addon/hint/show-hint.css">
<script src="codemirror-5.15.2/lib/codemirror.js"></script>
<script src="codemirror-5.15.2/addon/hint/show-hint.js"></script>
<script src="codemirror-5.15.2/addon/hint/xml-hint.js"></script>
<script src="codemirror-5.15.2/mode/xml/xml.js"></script>
<style type="text/css">
      .CodeMirror { border: 1px solid #eee; }
    </style>



<article>
<form id="codemir" method="post" action="editor.py">
<br><h2>Editor | <a href="landing.py">back to document list</a> </h2> 

<table style="background:#eee;padding:5pt;">
<tr><td>Document Name: </td><td>**docname** </td><td>**editdocname**</td></tr>
<tr><td>File Name: </td><td>**filename** </td><td>**editfilename**</td></tr>
<tr><td>Assigned to:</td><td> **assigned** </td><td>**editassignee**</td></tr>
<tr><td>Status:</td><td> **status** </td><td>**editstatus**</td></tr>
</table>


<textarea id="code" name="code">**content**
</textarea>
<input type="submit" value="Save" />
<input type="hidden" id="zangsir" name="id" value=""/>
</form>

    <script>
      var dummy = {
        attrs: {
          color: ["red", "green", "blue", "purple", "white", "black", "yellow"],
          size: ["large", "medium", "small"],
          description: null
        },
        children: []
      };

      var tags = {
        "!top": ["top"],
        "!attrs": {
          id: null,
          class: ["A", "B", "C"]
        },
        top: {
          attrs: {
            lang: ["en", "de", "fr", "nl"],
            freeform: null
          },
          children: ["animal", "plant"]
        },
        animal: {
          attrs: {
            name: null,
            isduck: ["yes", "no"]
          },
          children: ["wings", "feet", "body", "head", "tail"]
        },
        plant: {
          attrs: {name: null},
          children: ["leaves", "stem", "flowers"]
        },
        wings: dummy, feet: dummy, body: dummy, head: dummy, tail: dummy,
        leaves: dummy, stem: dummy, flowers: dummy
      };

      function completeAfter(cm, pred) {
        var cur = cm.getCursor();
        if (!pred || pred()) setTimeout(function() {
          if (!cm.state.completionActive)
            cm.showHint({completeSingle: false});
        }, 100);
        return CodeMirror.Pass;
      }

      function completeIfAfterLt(cm) {
        return completeAfter(cm, function() {
          var cur = cm.getCursor();
          return cm.getRange(CodeMirror.Pos(cur.line, cur.ch - 1), cur) == "<";
        });
      }

      function completeIfInTag(cm) {
        return completeAfter(cm, function() {
          var tok = cm.getTokenAt(cm.getCursor());
          if (tok.type == "string" && (!/['"]/.test(tok.string.charAt(tok.string.length - 1)) || tok.string.length == 1)) return false;
          var inner = CodeMirror.innerMode(cm.getMode(), tok.state).state;
          return inner.tagName;
        });
      }

      var editor = CodeMirror.fromTextArea(document.getElementById("code"), {
        mode: "xml",
        lineNumbers: true,indentUnit:0,
        extraKeys: {
          "'<'": completeAfter,
          "'/'": completeIfAfterLt,
          "' '": completeIfInTag,
          "'='": completeIfInTag,
          "Ctrl-Space": "autocomplete"
        },
        hintOptions: {schemaInfo: tags}
      });
	  
	  function updateTextArea() {
	      editor.save();
	  }
	  editor.on('change', updateTextArea);
	  
    </script>






</article>
</div>

**js**

</body>